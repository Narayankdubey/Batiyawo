{"version":3,"sources":["Message.js","components/loader/Loader.js","Chat.js","App.js","index.js"],"names":["Message","props","imgOrder","order","cls_nm","imgSrc","sender","className","message","src","alt","style","time","Loader","audio","Audio","socket","io","Chat","useState","oldData","setData","state","setstate","connected","isConnected","setIsConnected","useEffect","on","name","prompt","emit","msgObj","createdAt","moment","format","_id","length","old","data","play","window","Notification","permission","requestPermission","then","alert","notifyMe","off","map","msg_obj","fromNow","action","onSubmit","e","preventDefault","type","placeholder","value","onChange","event","target","onClick","trim","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.1ca7cfba.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Message = (props) => {\r\n\r\n  let imgOrder = { order: 0 };\r\n  let cls_nm = \"msg-container agent\";\r\n  let imgSrc = \"https://icon-library.com/images/avatar-icon-images/avatar-icon-images-4.jpg\";\r\n  if (props.sender === \"user\") {\r\n    imgOrder = { order: 2 };\r\n    cls_nm = \"msg-container user\";\r\n    imgSrc = \"https://image.freepik.com/free-vector/mysterious-mafia-man-smoking-cigarette_52683-34828.jpg\";\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {props.sender === \"notify\" ? (<span className=\"notify-msg\">{props.message}</span>) :\r\n       (<div className={cls_nm}>\r\n        <div className=\"msg-line\">\r\n          <img src={imgSrc} alt={props.sender} className=\"image\" style={imgOrder} />\r\n          <p>{props.message}</p>\r\n        </div>\r\n        <small className=\"time\">{props.time}</small>\r\n      </div>)}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Message;\r\n","import React from \"react\";\r\nimport \"./style.css\"\r\n\r\nconst Loader = () => {\r\n  return (\r\n    <div className=\"loader-container\">\r\n      <div className=\"preloader\">\r\n        <div className=\"preloader__square\"></div>\r\n        <div className=\"preloader__square\"></div>\r\n        <div className=\"preloader__square\"></div>\r\n        <div className=\"preloader__square\"></div>\r\n      </div>\r\n      <div className=\"status\">\r\n        Connecting<span className=\"status__dot\">.</span>\r\n        <span className=\"status__dot\">.</span>\r\n        <span className=\"status__dot\">.</span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Loader;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Message from \"./Message\";\r\nimport moment from \"moment\";\r\nimport ReactScrollableFeed from \"react-scrollable-feed\";\r\nimport io from \"socket.io-client\";\r\n\r\nimport Loader from \"./components/loader/Loader\";\r\n\r\nvar audio = new Audio(\"./assets/ting.mp3\");\r\n\r\nconst socket = io(\"https://chatserver-9t43.onrender.com\");\r\n\r\nconst Chat = () => {\r\n  const [oldData, setData] = useState(\"\");\r\n  const [state, setstate] = useState([]);\r\n  const [isConnected, setIsConnected] = useState(socket.connected);\r\n\r\n  const typeMsg = (event) => {\r\n    setData(event.target.value);\r\n  };\r\n\r\n  function notifyMe(data) {\r\n    if (!(\"Notification\" in window)) {\r\n      alert(\"This browser does not support desktop notification\");\r\n    } else if (Notification.permission === \"granted\") {\r\n      const notification = new Notification(`${data.name} : ${data.message}`);\r\n    } else if (Notification.permission !== \"denied\") {\r\n      Notification.requestPermission().then((permission) => {\r\n        if (permission === \"granted\") {\r\n          const notification = new Notification(\r\n            `${data.name} : ${data.message}`\r\n          );\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  const sendMsg = () => {\r\n    if (oldData.trim() !== \"\") {\r\n      let msgObj = {\r\n        message: oldData,\r\n        createdAt: moment().format(),\r\n        sender: \"user\",\r\n        _id: state.length + 1,\r\n      };\r\n      setstate((old) => {\r\n        return [...old, msgObj];\r\n      });\r\n      socket.emit(\"send\", oldData);\r\n    }\r\n    setData(\"\");\r\n  };\r\n\r\n  const onsubmit = (e) => {\r\n    e.preventDefault();\r\n  };\r\n\r\n  useEffect(() => {\r\n    socket.on(\"connect\", () => {\r\n      setIsConnected(true);\r\n    });\r\n\r\n    socket.on(\"disconnect\", () => {\r\n      setIsConnected(false);\r\n    });\r\n\r\n    const name = prompt(\"Enter your name to join\");\r\n    socket.emit(\"new-user-joined\", name);\r\n\r\n    socket.on(\"user-joined\", (name) => {\r\n      let msgObj = {\r\n        message: `${name} Joined the chat`,\r\n        createdAt: moment().format(),\r\n        sender: \"notify\",\r\n        _id: state.length + 1,\r\n      };\r\n      setstate((old) => {\r\n        return [...old, msgObj];\r\n      });\r\n    });\r\n    socket.on(\"receive\", (data) => {\r\n      audio.play();\r\n      let msgObj = {\r\n        message: `${data.name} : ${data.message}`,\r\n        createdAt: moment().format(),\r\n        sender: \"receive\",\r\n        _id: state.length + 1,\r\n      };\r\n      setstate((old) => {\r\n        return [...old, msgObj];\r\n      });\r\n      notifyMe(data);\r\n    });\r\n    socket.on(\"left\", (name) => {\r\n      let msgObj = {\r\n        message: `${name} left the chat`,\r\n        createdAt: moment().format(),\r\n        sender: \"notify\",\r\n        _id: state.length + 1,\r\n      };\r\n      setstate((old) => {\r\n        return [...old, msgObj];\r\n      });\r\n    });\r\n\r\n    return () => {\r\n      socket.off(\"connect\");\r\n      socket.off(\"disconnect\");\r\n      socket.off(\"pong\");\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      {!isConnected && <Loader />}\r\n      <div className=\"container\">\r\n        <div className=\"profile\">\r\n          <img\r\n            src=\"https://icon-library.com/images/avatar-icon-images/avatar-icon-images-4.jpg\"\r\n            alt=\"\"\r\n            className=\"profile-pic\"\r\n          />\r\n          <span className=\"profile-name\">Agent</span>\r\n        </div>\r\n        <div className=\"messages\">\r\n          <div className=\"inhert\">\r\n            <ReactScrollableFeed className=\"messages\">\r\n              {state.map((msg_obj) => {\r\n                return (\r\n                  <Message\r\n                    key={msg_obj._id}\r\n                    message={msg_obj.message}\r\n                    time={moment(msg_obj.createdAt).fromNow()}\r\n                    sender={msg_obj.sender}\r\n                  />\r\n                );\r\n              })}\r\n            </ReactScrollableFeed>\r\n          </div>\r\n        </div>\r\n        <form action=\"\" className=\"input-btn\" onSubmit={onsubmit}>\r\n          <input\r\n            type=\"text\"\r\n            name=\"msg\"\r\n            placeholder=\"Enter your message\"\r\n            value={oldData}\r\n            onChange={typeMsg}\r\n          />\r\n          <button type=\"submit\" className=\"send\" onClick={sendMsg}>\r\n            Send\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Chat;\r\n","import React from \"react\";\r\nimport Chat from \"./Chat\";\r\n\r\nconst App = () => {\r\n  return (\r\n    <>\r\n      <Chat />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}