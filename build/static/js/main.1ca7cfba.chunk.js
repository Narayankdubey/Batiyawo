(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{33:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var s=n(1),c=n.n(s),a=n(25),i=n.n(a),r=(n(33),n(20)),o=n(23),m=n(0),d=function(e){var t={order:0},n="msg-container agent",s="https://icon-library.com/images/avatar-icon-images/avatar-icon-images-4.jpg";return"user"===e.sender&&(t={order:2},n="msg-container user",s="https://image.freepik.com/free-vector/mysterious-mafia-man-smoking-cigarette_52683-34828.jpg"),Object(m.jsx)(m.Fragment,{children:"notify"===e.sender?Object(m.jsx)("span",{className:"notify-msg",children:e.message}):Object(m.jsxs)("div",{className:n,children:[Object(m.jsxs)("div",{className:"msg-line",children:[Object(m.jsx)("img",{src:s,alt:e.sender,className:"image",style:t}),Object(m.jsx)("p",{children:e.message})]}),Object(m.jsx)("small",{className:"time",children:e.time})]})})},j=n(18),l=n.n(j),u=n(26),f=n(28),b=(n(41),function(){return Object(m.jsxs)("div",{className:"loader-container",children:[Object(m.jsxs)("div",{className:"preloader",children:[Object(m.jsx)("div",{className:"preloader__square"}),Object(m.jsx)("div",{className:"preloader__square"}),Object(m.jsx)("div",{className:"preloader__square"}),Object(m.jsx)("div",{className:"preloader__square"})]}),Object(m.jsxs)("div",{className:"status",children:["Connecting",Object(m.jsx)("span",{className:"status__dot",children:"."}),Object(m.jsx)("span",{className:"status__dot",children:"."}),Object(m.jsx)("span",{className:"status__dot",children:"."})]})]})}),g=new Audio("./assets/ting.mp3"),p=Object(f.a)("https://chatserver-9t43.onrender.com"),O=function(){var e=Object(s.useState)(""),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(s.useState)([]),i=Object(o.a)(a,2),j=i[0],f=i[1],O=Object(s.useState)(p.connected),h=Object(o.a)(O,2),x=h[0],v=h[1];return Object(s.useEffect)((function(){p.on("connect",(function(){v(!0)})),p.on("disconnect",(function(){v(!1)}));var e=prompt("Enter your name to join");return p.emit("new-user-joined",e),p.on("user-joined",(function(e){var t={message:"".concat(e," Joined the chat"),createdAt:l()().format(),sender:"notify",_id:j.length+1};f((function(e){return[].concat(Object(r.a)(e),[t])}))})),p.on("receive",(function(e){g.play();var t={message:"".concat(e.name," : ").concat(e.message),createdAt:l()().format(),sender:"receive",_id:j.length+1};f((function(e){return[].concat(Object(r.a)(e),[t])})),function(e){"Notification"in window?"granted"===Notification.permission?new Notification("".concat(e.name," : ").concat(e.message)):"denied"!==Notification.permission&&Notification.requestPermission().then((function(t){"granted"===t&&new Notification("".concat(e.name," : ").concat(e.message))})):alert("This browser does not support desktop notification")}(e)})),p.on("left",(function(e){var t={message:"".concat(e," left the chat"),createdAt:l()().format(),sender:"notify",_id:j.length+1};f((function(e){return[].concat(Object(r.a)(e),[t])}))})),function(){p.off("connect"),p.off("disconnect"),p.off("pong")}}),[]),Object(m.jsxs)(m.Fragment,{children:[!x&&Object(m.jsx)(b,{}),Object(m.jsxs)("div",{className:"container",children:[Object(m.jsxs)("div",{className:"profile",children:[Object(m.jsx)("img",{src:"https://icon-library.com/images/avatar-icon-images/avatar-icon-images-4.jpg",alt:"",className:"profile-pic"}),Object(m.jsx)("span",{className:"profile-name",children:"Agent"})]}),Object(m.jsx)("div",{className:"messages",children:Object(m.jsx)("div",{className:"inhert",children:Object(m.jsx)(u.a,{className:"messages",children:j.map((function(e){return Object(m.jsx)(d,{message:e.message,time:l()(e.createdAt).fromNow(),sender:e.sender},e._id)}))})})}),Object(m.jsxs)("form",{action:"",className:"input-btn",onSubmit:function(e){e.preventDefault()},children:[Object(m.jsx)("input",{type:"text",name:"msg",placeholder:"Enter your message",value:n,onChange:function(e){c(e.target.value)}}),Object(m.jsx)("button",{type:"submit",className:"send",onClick:function(){if(""!==n.trim()){var e={message:n,createdAt:l()().format(),sender:"user",_id:j.length+1};f((function(t){return[].concat(Object(r.a)(t),[e])})),p.emit("send",n)}c("")},children:"Send"})]})]})]})},h=function(){return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(O,{})})};i.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(h,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.1ca7cfba.chunk.js.map