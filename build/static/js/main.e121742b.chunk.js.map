{"version":3,"sources":["Message.js","components/loader/Loader.js","Chat.js","App.js","index.js"],"names":["Message","props","imgOrder","order","cls_nm","imgSrc","sender","_jsx","_Fragment","children","className","message","_jsxs","src","alt","style","time","Loader","audio","Audio","socket","io","Chat","_useState","useState","_useState2","_slicedToArray","oldData","setData","_useState3","_useState4","state","setstate","_useState5","connected","_useState6","isConnected","setIsConnected","useEffect","on","name","prompt","emit","msgObj","concat","createdAt","moment","format","_id","length","old","_toConsumableArray","data","play","window","Notification","permission","requestPermission","then","alert","notifyMe","off","ReactScrollableFeed","map","msg_obj","fromNow","action","onSubmit","e","preventDefault","type","placeholder","value","onChange","event","target","onClick","trim","App","ReactDOM","render","React","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e121742b.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Message = (props) => {\r\n\r\n  let imgOrder = { order: 0 };\r\n  let cls_nm = \"msg-container agent\";\r\n  let imgSrc = \"https://icon-library.com/images/avatar-icon-images/avatar-icon-images-4.jpg\";\r\n  if (props.sender === \"user\") {\r\n    imgOrder = { order: 2 };\r\n    cls_nm = \"msg-container user\";\r\n    imgSrc = \"https://image.freepik.com/free-vector/mysterious-mafia-man-smoking-cigarette_52683-34828.jpg\";\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {props.sender === \"notify\" ? (<span className=\"notify-msg\">{props.message}</span>) :\r\n       (<div className={cls_nm}>\r\n        <div className=\"msg-line\">\r\n          <img src={imgSrc} alt={props.sender} className=\"image\" style={imgOrder} />\r\n          <p>{props.message}</p>\r\n        </div>\r\n        <small className=\"time\">{props.time}</small>\r\n      </div>)}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Message;\r\n","import React from \"react\";\r\nimport \"./style.css\"\r\n\r\nconst Loader = () => {\r\n  return (\r\n    <div className=\"loader-container\">\r\n      <div className=\"preloader\">\r\n        <div className=\"preloader__square\"></div>\r\n        <div className=\"preloader__square\"></div>\r\n        <div className=\"preloader__square\"></div>\r\n        <div className=\"preloader__square\"></div>\r\n      </div>\r\n      <div className=\"status\">\r\n        Connecting<span className=\"status__dot\">.</span>\r\n        <span className=\"status__dot\">.</span>\r\n        <span className=\"status__dot\">.</span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Loader;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Message from \"./Message\";\r\nimport moment from \"moment\";\r\nimport ReactScrollableFeed from \"react-scrollable-feed\";\r\nimport io from \"socket.io-client\";\r\n\r\nimport Loader from \"./components/loader/Loader\";\r\n\r\nvar audio = new Audio(\"./assets/ting.mp3\");\r\n\r\nconst socket = io(\"https://chatserver-9t43.onrender.com\");\r\n\r\nconst Chat = () => {\r\n  const [oldData, setData] = useState(\"\");\r\n  const [state, setstate] = useState([]);\r\n  const [isConnected, setIsConnected] = useState(socket.connected);\r\n\r\n  const typeMsg = (event) => {\r\n    setData(event.target.value);\r\n  };\r\n\r\n  function notifyMe(data) {\r\n    if (!(\"Notification\" in window)) {\r\n      alert(\"This browser does not support desktop notification\");\r\n    } else if (Notification.permission === \"granted\") {\r\n      const notification = new Notification(`${data.name} : ${data.message}`);\r\n    } else if (Notification.permission !== \"denied\") {\r\n      Notification.requestPermission().then((permission) => {\r\n        if (permission === \"granted\") {\r\n          const notification = new Notification(\r\n            `${data.name} : ${data.message}`\r\n          );\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  const sendMsg = () => {\r\n    if (oldData.trim() !== \"\") {\r\n      let msgObj = {\r\n        message: oldData,\r\n        createdAt: moment().format(),\r\n        sender: \"user\",\r\n        _id: state.length + 1,\r\n      };\r\n      setstate((old) => {\r\n        return [...old, msgObj];\r\n      });\r\n      socket.emit(\"send\", oldData);\r\n    }\r\n    setData(\"\");\r\n  };\r\n\r\n  const onsubmit = (e) => {\r\n    e.preventDefault();\r\n  };\r\n\r\n  useEffect(() => {\r\n    socket.on(\"connect\", () => {\r\n      setIsConnected(true);\r\n    });\r\n\r\n    socket.on(\"disconnect\", () => {\r\n      setIsConnected(false);\r\n    });\r\n\r\n    const name = prompt(\"Enter your name to join\");\r\n    socket.emit(\"new-user-joined\", name);\r\n\r\n    socket.on(\"user-joined\", (name) => {\r\n      let msgObj = {\r\n        message: `${name} Joined the chat`,\r\n        createdAt: moment().format(),\r\n        sender: \"notify\",\r\n        _id: state.length + 1,\r\n      };\r\n      setstate((old) => {\r\n        return [...old, msgObj];\r\n      });\r\n    });\r\n    socket.on(\"receive\", (data) => {\r\n      audio.play();\r\n      let msgObj = {\r\n        message: `${data.name} : ${data.message}`,\r\n        createdAt: moment().format(),\r\n        sender: \"receive\",\r\n        _id: state.length + 1,\r\n      };\r\n      setstate((old) => {\r\n        return [...old, msgObj];\r\n      });\r\n      notifyMe(data);\r\n    });\r\n    socket.on(\"left\", (name) => {\r\n      let msgObj = {\r\n        message: `${name} left the chat`,\r\n        createdAt: moment().format(),\r\n        sender: \"notify\",\r\n        _id: state.length + 1,\r\n      };\r\n      setstate((old) => {\r\n        return [...old, msgObj];\r\n      });\r\n    });\r\n\r\n    return () => {\r\n      socket.off(\"connect\");\r\n      socket.off(\"disconnect\");\r\n      socket.off(\"pong\");\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      {!isConnected && <Loader />}\r\n      <div className=\"container\">\r\n        <div className=\"profile\">\r\n          <img\r\n            src=\"https://icon-library.com/images/avatar-icon-images/avatar-icon-images-4.jpg\"\r\n            alt=\"\"\r\n            className=\"profile-pic\"\r\n          />\r\n          <span className=\"profile-name\">Agent</span>\r\n        </div>\r\n        <div className=\"messages\">\r\n          <div className=\"inhert\">\r\n            <ReactScrollableFeed className=\"messages\">\r\n              {state.map((msg_obj) => {\r\n                return (\r\n                  <Message\r\n                    key={msg_obj._id}\r\n                    message={msg_obj.message}\r\n                    time={moment(msg_obj.createdAt).fromNow()}\r\n                    sender={msg_obj.sender}\r\n                  />\r\n                );\r\n              })}\r\n            </ReactScrollableFeed>\r\n          </div>\r\n        </div>\r\n        <form action=\"\" className=\"input-btn\" onSubmit={onsubmit}>\r\n          <input\r\n            type=\"text\"\r\n            name=\"msg\"\r\n            placeholder=\"Enter your message\"\r\n            value={oldData}\r\n            onChange={typeMsg}\r\n          />\r\n          <button type=\"submit\" className=\"send\" onClick={sendMsg}>\r\n            Send\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Chat;\r\n","import React from \"react\";\r\nimport Chat from \"./Chat\";\r\n\r\nconst App = () => {\r\n  return (\r\n    <>\r\n      <Chat />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}